{"version":3,"file":"project.js","sourceRoot":"","sources":["../../src/connect/project.ts"],"names":[],"mappings":"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","sourcesContent":["import { spawnSync } from 'child_process'\nimport { globSync } from 'glob'\nimport path from 'path'\nimport fs from 'fs'\nimport ts from 'typescript'\nimport { exitWithError, logger } from '../common/logging'\nimport chalk from 'chalk'\nimport readline from 'readline'\n// We use an old version of this dep as I couldn't get ES modules working\nimport findUp from 'find-up'\nimport { exitWithFeedbackMessage } from './helpers'\nimport { CodeConnectLabel, SyntaxHighlightLanguage } from './label_language_mapping'\n\nconst DEFAULT_CONFIG_FILE_NAME = 'figma.config.json'\nconst ENV_FILE_NAME = '.env'\n\nexport const DEFAULT_INCLUDE_GLOBS_BY_PARSER = {\n  react: [`**/*.{tsx,jsx}`],\n  html: [`**/*.{ts,js}`],\n  swift: ['**/*.swift'],\n  compose: ['**/*.kt'],\n  // include globs should be included in configs for custom parsers\n  custom: undefined,\n  __unit_test__: [''],\n}\n\nexport const DEFAULT_LABEL_PER_PARSER: Partial<Record<CodeConnectParser, string>> = {\n  react: CodeConnectLabel.React,\n  html: CodeConnectLabel.WebComponents,\n}\n\n// First party parsers which call into parser executables\nexport type CodeConnectExecutableParser = 'swift' | 'compose' | 'custom' | '__unit_test__'\n\n// React is a special case for now as we call it directly from the CLI rather\n// than via an executable for legacy reasons. We will migrate it to the\n// parser executable model.\nexport type CodeConnectParser = 'react' | 'html' | CodeConnectExecutableParser\n\nexport type BaseCodeConnectConfig = {\n  /**\n   * Specify glob patterns for files (relative to the project root) to be\n   * included when looking for source files. If not specified, all files\n   * (except any specified in `exclude`) will be included.\n   */\n  include?: string[]\n  /**\n   * Specify glob patterns for files (relative to the project root) to be\n   * excluded when looking for source files. If not specified, only\n   * `node_modules` will be excluded.\n   */\n  exclude?: string[]\n  /**\n   * Optional object of substitutions applied to document URLs (in the format {\n   * fromString, toString }) for testing (e.g. remapping a production URL to a\n   * staging URL). Not publicly documented.\n   */\n  documentUrlSubstitutions?: Record<string, string>\n  /**\n   * The parser name, if using an internal parser.\n   */\n  parser: CodeConnectParser\n\n  /**\n   * Label to use for the uploaded code examples\n   */\n  label?: string\n\n  /**\n   * Language to use for syntax highlighting in the uploaded code examples.\n   * If not specified, language is inferred from the label or parser type.\n   */\n  language?: SyntaxHighlightLanguage\n\n  /**\n   * The URL of the Figma file to use during the interactive setup wizard for connecting code components to Figma components.\n   */\n  interactiveSetupFigmaFileUrl?: string\n\n  /**\n   * Custom Figma API URL to use instead of https://api.figma.com/v1\n   */\n  apiUrl?: string\n}\n\nexport type CodeConnectExecutableParserConfig = BaseCodeConnectConfig & {\n  parser: CodeConnectExecutableParser\n}\n\nexport type CodeConnectCustomExecutableParserConfig = BaseCodeConnectConfig & {\n  parser: 'custom'\n  parserCommand: string\n}\n\n/**\n * React specific configuration\n */\nexport type CodeConnectReactConfig = BaseCodeConnectConfig & {\n  parser: 'react'\n  /**\n   * Maps imports from their path on disk to the specified path.\n   * This will rewrite the imports in generated code examples, so it works with\n   * relative imports such as `import { Button } from \"./\"`.\n   *\n   * Example: { \"src/components/*\": \"@ui/components\" }\n   * Would rewrite imports for components located in `src/components` to `@ui/components` in\n   * generated code examples.\n   * `import { Button } from \"./\"` -> `import { Button } from \"@ui/components/Button\"`\n   */\n  importPaths?: Record<string, string>\n  /**\n   * For import resolution - this is a temporary solution to support projects that use\n   * pnpm workspaces, as the compiler doesn't seem to be able to resolve imports when\n   * the package in node_modules is a symlink. Need to look into this more and find a\n   * better solution.\n   */\n  paths?: Record<string, string[]>\n  /**\n   * Storybook specific configuration\n   */\n  storybook?: {\n    /**\n     * The URL of the Storybook instance for the project\n     */\n    url: string\n  }\n}\n\nexport type CodeConnectHtmlConfig = BaseCodeConnectConfig & {}\n\nexport type CodeConnectParserlessConfig = Omit<BaseCodeConnectConfig, 'parser'>\n\nexport type CodeConnectConfig =\n  | CodeConnectReactConfig\n  | CodeConnectExecutableParserConfig\n  | CodeConnectCustomExecutableParserConfig\n  | CodeConnectHtmlConfig\n  | BaseCodeConnectConfig\n\ninterface FigmaConfig {\n  codeConnect?: CodeConnectConfig\n}\n\nexport function determineConfigFromProject(\n  dir: string,\n  exitOnError = true,\n): FigmaConfig | undefined {\n  const parser = determineParserFromProject(dir)\n  if (parser) {\n    const label = determineLabelFromProject(dir)\n    if (label) {\n      return { codeConnect: { parser, label } }\n    }\n\n    return { codeConnect: { parser } }\n  }\n\n  if (exitOnError) {\n    exitWithError(\n      `Code Connect was not able to determine your project type, and no config file was found. Please ensure you are running Code Connect from your project root. You may need to create a config file specifying which parser to use. See https://github.com/figma/code-connect/ for instructions.`,\n    )\n  }\n}\n\nfunction showParserMessage(message: string) {\n  logger.info(\n    message +\n      '. If this is incorrect, please check you are running Code Connect from your project root, or add a `parser` key to your config file. See https://github.com/figma/code-connect for more information.',\n  )\n}\n\nfunction packageJsonContains(packageJson: any, dependency: string) {\n  return (\n    (packageJson.dependencies && packageJson.dependencies[dependency]) ||\n    (packageJson.peerDependencies && packageJson.peerDependencies[dependency]) ||\n    (packageJson.devDependencies && packageJson.devDependencies[dependency])\n  )\n}\n\n// Walk up from the given directory looking for the first directory which\n// matches heuristics for the platforms we support. This means that e.g. if you\n// have a Swift project inside a React project, we'll detect Swift. This enables\n// users to run commands from anywhere inside their project, rather than having\n// to run from the root (the same way npm works).\nfunction determineParserFromProject(dir: string): CodeConnectParser | undefined {\n  let parser: CodeConnectParser | undefined\n\n  findUp.sync(\n    (currentDir) => {\n      const packageJsonPath = path.join(currentDir, 'package.json')\n\n      if (fs.existsSync(packageJsonPath)) {\n        const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf-8'))\n        if (packageJsonContains(packageJson, 'react')) {\n          showParserMessage(\n            `Using \"react\" parser as package.json containing a \"react\" ${\n              packageJson.dependencies && packageJson.dependencies['react']\n                ? 'dependency'\n                : 'peer dependency'\n            } was found in ${currentDir}`,\n          )\n          parser = 'react'\n          return findUp.stop\n        } else {\n          showParserMessage(\n            `Using \"html\" parser as package.json containing no other supported web frameworks was found in ${currentDir}`,\n          )\n          parser = 'html'\n          return findUp.stop\n        }\n      } else {\n        if (globSync([`${currentDir}/*.xcodeproj`, `${currentDir}/Package.swift`]).length > 0) {\n          showParserMessage(\n            `Using \"swift\" parser as a file matching *.xcodeproj or Package.swift was found in ${currentDir}`,\n          )\n          parser = 'swift'\n          return findUp.stop\n        } else if (globSync([`${currentDir}/build.gradle.kts`]).length > 0) {\n          showParserMessage(\n            `Using \"compose\" parser as a file matching build.gradle.kts was found in ${currentDir}`,\n          )\n          parser = 'compose'\n          return findUp.stop\n        } else if (globSync([`${currentDir}/build.gradle`]).length > 0) {\n          showParserMessage(\n            `Using \"compose\" parser as a file matching build.gradle was found in ${currentDir}`,\n          )\n          parser = 'compose'\n          return findUp.stop\n        }\n      }\n    },\n    { cwd: dir },\n  )\n\n  return parser\n}\n\n// Similarly to determineParserFromProject, this walks up looking for a\n// package.json containing a library which we support and we set a specific\n// label for. An example is Angular, which is detected as 'html' parser, but we\n// set a different label for it.\nexport function determineLabelFromProject(dir: string): string | undefined {\n  function showMessage(\n    libraryName: string,\n    moduleName: string,\n    packageJson: any,\n    currentDir: string,\n  ) {\n    showParserMessage(\n      `Using \"${libraryName}\" label as package.json containing a \"${moduleName}\" ${\n        packageJson.dependencies && packageJson.dependencies[moduleName]\n          ? 'dependency'\n          : 'peer dependency'\n      } was found in ${currentDir}`,\n    )\n  }\n\n  let label: string | undefined\n\n  findUp.sync(\n    (currentDir) => {\n      const packageJsonPath = path.join(currentDir, 'package.json')\n\n      if (fs.existsSync(packageJsonPath)) {\n        const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf-8'))\n        if (packageJsonContains(packageJson, 'angular')) {\n          showMessage('Angular', 'angular', packageJson, currentDir)\n          label = CodeConnectLabel.Angular\n          return findUp.stop\n        } else if (packageJsonContains(packageJson, 'vue')) {\n          showMessage('Vue', 'vue', packageJson, currentDir)\n          label = CodeConnectLabel.Vue\n          return findUp.stop\n        }\n      }\n    },\n    { cwd: dir },\n  )\n\n  return label\n}\n\nasync function checkForLegacyConfig(\n  config: FigmaConfig & { codeConnect: { swift?: any; react?: any } },\n  configFilePath: string,\n): Promise<FigmaConfig> | never {\n  const { codeConnect } = config\n\n  const newConfigBase = {\n    ...(codeConnect.include ? { include: codeConnect.include } : {}),\n    ...(codeConnect.exclude ? { exclude: codeConnect.exclude } : {}),\n    ...(codeConnect.documentUrlSubstitutions\n      ? { documentUrlSubstitutions: codeConnect.documentUrlSubstitutions }\n      : {}),\n  }\n  const maybeNewReactConfig = {\n    codeConnect: { parser: 'react', ...codeConnect.react, ...newConfigBase },\n  }\n  const maybeNewSwiftConfig = {\n    codeConnect: { parser: 'swift', ...codeConnect.swift, ...newConfigBase },\n  }\n\n  if (codeConnect.react && codeConnect.swift) {\n    logger.error(`${chalk.bold('⚠️  Your Code Connect configuration needs to be updated\\n')}`)\n\n    logger.infoForce(`Code Connect is migrating from a single configuration file for all supported languages, to individual configuration files for each language.\n\nAs part of this change, your Code Connect configuration file needs to be split into two configuration files, one for React and one for Swift.\n\nThe React ${chalk.bold(\n      'figma.config.json',\n    )} should be located in your React project root and contain:\n\n${JSON.stringify(maybeNewReactConfig, null, 2)}\n\nThe Swift ${chalk.bold(\n      'figma.config.json',\n    )} should be located in your Swift project root and contain:\n\n${JSON.stringify(maybeNewSwiftConfig, null, 2)}\n\nYou will need to check any include/exclude paths are correct relative to the new locations.`)\n    exitWithFeedbackMessage(1)\n  }\n\n  if (codeConnect.react || codeConnect.swift) {\n    const platform = codeConnect.react ? 'React' : 'Swift'\n    const newConfig = codeConnect.react ? maybeNewReactConfig : maybeNewSwiftConfig\n\n    logger.infoForce(\n      `${chalk.bold('⚠️  Your Code Connect configuration needs to be updated')}\n\nCode Connect is migrating from a single configuration file for all supported languages, to individual configuration files for each language.\n\nAs part of this change, your Code Connect configuration file needs to be updated to remove the ${chalk.bold(\n        platform.toLowerCase(),\n      )} key and add ${chalk.bold(`{ parser: \"${platform.toLowerCase()}\" }`)}:\n\n${JSON.stringify(newConfig, null, 2)}\n\nCode Connect can make this change for you automatically, or you can do it manually.\n\nPlease also ensure your configuration file is located in your ${platform} project root. If you move the configuration file, you will need to check any include/exclude paths are correct relative to the new location.\n\nPlease raise an issue at https://github.com/figma/code-connect/issues if you have any problems.\n\n---\n`,\n    )\n\n    const rl = readline.createInterface({\n      input: process.stdin,\n      output: process.stderr,\n    })\n\n    const updateConfig = await new Promise<string>((resolve) => {\n      rl.question(\n        'Would you like Code Connect to update your configuration file for you? (y/n) ',\n        (answer) => {\n          resolve(answer)\n        },\n      )\n    })\n    rl.close()\n\n    if (updateConfig.toLowerCase() === 'y') {\n      fs.writeFileSync(configFilePath, JSON.stringify(newConfig, null, 2))\n      logger.infoForce(`\\nConfiguration file updated`)\n      return newConfig\n    } else {\n      exitWithError(`\\nPlease update your configuration file manually`)\n    }\n  }\n\n  return config\n}\n\nasync function parseConfig(configFilePath: string, dir: string): Promise<FigmaConfig | undefined> {\n  try {\n    const rawData = fs.readFileSync(configFilePath, 'utf-8')\n    const rawConfig = JSON.parse(rawData)\n    const config = await checkForLegacyConfig(rawConfig, configFilePath)\n\n    if (!config.codeConnect?.parser) {\n      const parser = determineParserFromProject(dir)\n\n      if (!parser) {\n        logger.error(\n          `Code Connect was not able to determine your project type, and no \\`parser\\` was specified. Please ensure you are running Code Connect from your project root. You may need to add a \\`parser\\` key to your config file, specifying which parser to use. See https://github.com/figma/code-connect/ for instructions.`,\n        )\n        exitWithFeedbackMessage(1)\n      }\n\n      if (!config.codeConnect) {\n        config.codeConnect = { parser }\n      }\n      // TS errors if this is in an else\n      config.codeConnect.parser = parser\n    }\n\n    if (!config.codeConnect?.label) {\n      const label = determineLabelFromProject(dir)\n      if (label) {\n        config.codeConnect.label = label\n      }\n    }\n\n    return config\n  } catch (error) {\n    console.error('Error parsing config file:', error)\n    return undefined\n  }\n}\n\nexport function getGitRemoteURL(repoPath: string) {\n  try {\n    const spawn = spawnSync('git', ['config', '--get', 'remote.origin.url'], {\n      cwd: repoPath,\n    })\n    const output = spawn.stdout\n    return (output || '').toString().trim()\n  } catch (error) {\n    console.error('Error getting git remote URL:', error)\n    return ''\n  }\n}\n\n/**\n * Uses `git rev-parse` to find absolute path to the root of the git repository\n */\nexport function getGitRepoAbsolutePath(filePath: string) {\n  try {\n    const dirPath = fs.statSync(filePath).isDirectory() ? filePath : path.dirname(filePath)\n    const spawn = spawnSync('git', ['rev-parse', '--show-toplevel'], {\n      cwd: dirPath,\n    })\n    const output = spawn.stdout\n    return (\n      (output || '')\n        .toString()\n        // git always uses /, but other Node API use \\ on Windows\n        .replaceAll('/', path.sep)\n        .trim()\n    )\n  } catch (error: any) {\n    console.error('Error running `git rev-parse`:', error.toString().split('\\n')[0])\n    return ''\n  }\n}\n\n/**\n * Find the default branch name (master or main) for the git repository\n */\nexport function getGitRepoDefaultBranchName(repoPath: string) {\n  const DEFAULT_BRANCH_NAME = 'master'\n\n  try {\n    // Get all git branches\n    const gitBranchResult = spawnSync('git', ['branch', '-r'], {\n      cwd: repoPath,\n    })\n\n    if (!gitBranchResult.stdout) {\n      return DEFAULT_BRANCH_NAME\n    }\n\n    const branches = gitBranchResult.stdout\n      .toString()\n      .trim()\n      .split('\\n')\n      .map((s) => s.trim())\n\n    // Check if origin/main exists, otherwise assume master\n    if (branches.includes('origin/main')) {\n      return 'main'\n    } else {\n      return DEFAULT_BRANCH_NAME\n    }\n  } catch (error: any) {\n    console.error('Error getting git default branch name:', error.toString().split('\\n')[0])\n    return DEFAULT_BRANCH_NAME\n  }\n}\n\n/**\n * Finds the URL of a remote file\n * @param filePath absolute file path on disk\n * @param repoURL remote URL, can be a GitHub, GitLab, Bitbucket, etc. URL.\n * @returns\n */\nexport function getRemoteFileUrl(filePath: string, repoURL?: string) {\n  if (!repoURL) {\n    return ''\n  }\n\n  filePath = filePath.replaceAll(path.sep, '/')\n\n  let url = repoURL.trim()\n  if (url.startsWith('git@')) {\n    url = url.replace(':', '/')\n    url = url.replace('git@', 'https://')\n  }\n  url = url.replace(/\\.git$/, '')\n\n  // the folder of the git repo on disk could be named differently,\n  // so we need to find the relative path of the file to the root of the repo\n  // and append that to the remote URL\n  const repoAbsPath = getGitRepoAbsolutePath(filePath)\n    // Windows uses \\ as the path separator, so replace with /\n    .replaceAll(path.sep, '/')\n\n  const defaultBranch = getGitRepoDefaultBranchName(repoAbsPath)\n  const index = filePath.indexOf(repoAbsPath)\n  if (index === -1) {\n    return ''\n  }\n\n  const relativeFilePath = filePath.substring(index + repoAbsPath.length)\n\n  if (url.includes('github.com')) {\n    return `${url}/blob/${defaultBranch}${relativeFilePath}`\n  } else if (url.includes('gitlab.com')) {\n    return `${url}/-/blob/${defaultBranch}${relativeFilePath}`\n  } else if (url.includes('bitbucket.org')) {\n    return `${url}/src/${defaultBranch}${relativeFilePath}`\n  } else if (url.includes('dev.azure.com')) {\n    // `git config --get remote.origin.url` for azure repos will return different strings depending on if it was\n    // cloned with https or ssh. We need to convert this to a valid URL like \"https://dev.azure.com/org/repo/_git/repo?path=/\"\n    if (repoURL.startsWith('git@')) {\n      // ssh: \"git@ssh.dev.azure.com:v3/org/repo/repo\"\n      const [org, project1, project2] = repoURL.split('/').slice(-3)\n      return `https://dev.azure.com/${org}/${project1}/_git/${project2}?path=${relativeFilePath}&branch=${defaultBranch}`\n    } else {\n      // https: \"https://org@dev.azure.com/org/repo/_git/repo\"\n      const [_, url] = repoURL.split('@')\n      return `https://${url}?path=${relativeFilePath}&branch=${defaultBranch}`\n    }\n  } else {\n    logger.debug('Unknown remote URL - assuming GitHub Enterprise', url)\n    return `${url}/blob/${defaultBranch}${relativeFilePath}`\n  }\n}\n\nexport function getStorybookUrl(filePath: string, storybookUrl: string) {\n  // the folder of the git repo on disk could be named differently,\n  // so we need to find the relative path of the file to the root of the repo\n  // and append that to the remote URL\n  const repoAbsPath = getGitRepoAbsolutePath(filePath).replaceAll(path.sep, '/')\n  const index = filePath.indexOf(repoAbsPath)\n  if (index === -1) {\n    return ''\n  }\n\n  const relativeFilePath = filePath.substring(index + repoAbsPath.length + 1) // +1 to remove the leading slash\n  const storybookComponentPath = relativeFilePath\n    .trim()\n    .replace(/[\\s|_]/g, '-')\n    .replace(/\\.[jt]sx?$/, '')\n    .replaceAll('\\\\', '/')\n    .split('/')\n    .join('-')\n\n  return `${storybookUrl}/?path=/docs/${storybookComponentPath}`\n}\n\nexport type ProjectInfo<ConfigT = CodeConnectConfig> = {\n  /**\n   * Absolute path of the project directory\n   */\n  absPath: string\n  /**\n   * An array of all tsx files in the project\n   */\n  files: string[]\n  /**\n   * The git remote URL of the project\n   */\n  remoteUrl: string\n  /**\n   * The parsed Code Connect config file\n   */\n  config: ConfigT\n}\n\nexport type ReactProjectInfo = ProjectInfo<CodeConnectReactConfig> & {\n  /**\n   * TS program containing all tsx files in the project\n   */\n  tsProgram: ts.Program\n}\n\nfunction mapToAbsolutePaths(globPaths: string[], absPath: string) {\n  // glob doesn't like Windows paths so convert to *nix format\n  return globPaths.map((globPath) => `${absPath.replaceAll(path.sep, '/')}/${globPath}`)\n}\n\nexport function getDefaultConfigPath(dir: string) {\n  return path.resolve(path.join(dir, DEFAULT_CONFIG_FILE_NAME))\n}\n\nexport function getEnvPath(dir: string) {\n  return path.resolve(path.join(dir, ENV_FILE_NAME))\n}\n\nexport async function parseOrDetermineConfig(dir: string, configPath: string) {\n  const configFilePath = configPath ? path.resolve(configPath) : getDefaultConfigPath(dir)\n\n  const hasConfigFile = fs.existsSync(configFilePath)\n\n  if (!hasConfigFile) {\n    if (configPath) {\n      logger.warn(`${configPath} does not exist, proceeding with default options`)\n    } else {\n      logger.info(`No config file found in ${dir}, proceeding with default options`)\n    }\n  }\n\n  const globalConfig = hasConfigFile\n    ? await parseConfig(configFilePath, dir)\n    : determineConfigFromProject(dir)\n\n  if (!globalConfig) {\n    throw new Error(`Error parsing config file: ${configFilePath}`)\n  }\n\n  if (!globalConfig.codeConnect) {\n    throw new Error(`No options specified under 'codeConnect' in config file: ${configFilePath}`)\n  }\n\n  const config = globalConfig.codeConnect\n\n  if (hasConfigFile) {\n    if (!config) {\n      logger.info(`Config file found, but no options specified under 'codeConnect'. Parsing ${dir}`)\n    } else if (config && !config.include) {\n      logger.info(`Config file found, but no include globs specified. Parsing ${dir}`)\n    } else {\n      logger.info(`Config file found, parsing ${dir} using specified include globs`)\n    }\n  }\n\n  return {\n    config,\n    hasConfigFile,\n  }\n}\n\n/**\n * Check if a .env file exists in the provided directory and if it contains a FIGMA_ACCESS_TOKEN.\n */\nexport async function checkForEnvAndToken(dir: string) {\n  // Scan the provided directory for a .env file\n  const envPath = await findUp('.env', { cwd: dir })\n\n  if (!envPath) {\n    // No .env file found\n    return {\n      hasEnvFile: false,\n      envHasFigmaToken: false,\n    }\n  }\n\n  // Read the contents of the .env file\n  const envContents = fs.readFileSync(envPath, 'utf-8')\n\n  // Determine if the .env file contains a FIGMA_ACCESS_TOKEN\n  const envVars = envContents.split('\\n').reduce(\n    (\n      acc: {\n        [key: string]: string\n      },\n      line,\n    ) => {\n      const [key, value] = line.split('=')\n      acc[key] = value\n      return acc\n    },\n    {},\n  )\n\n  const figmaAccessToken = envVars['FIGMA_ACCESS_TOKEN']\n\n  return {\n    hasEnvFile: true,\n    envHasFigmaToken: !!figmaAccessToken,\n  }\n}\n\n/**\n * Gets information about a project from config.\n *\n * @param dir Directory containing the project\n * @param config Code Connect config\n * @returns Object containing information about the project\n */\nexport async function getProjectInfoFromConfig(\n  dir: string,\n  config: CodeConnectConfig,\n): Promise<ProjectInfo> {\n  const absPath = path.resolve(dir)\n  const remoteUrl = getGitRemoteURL(absPath)\n\n  const defaultIncludeGlobs = config.parser\n    ? DEFAULT_INCLUDE_GLOBS_BY_PARSER[config.parser]\n    : undefined\n\n  // always ignore any `node_modules` folders in react projects\n  const defaultExcludeGlobs = config.parser\n    ? ({\n        react: ['node_modules/**'],\n        html: ['node_modules/**'],\n        swift: ['**/__test__/**'],\n        compose: [],\n        custom: [],\n        __unit_test__: [],\n      }[config.parser] ?? [])\n    : []\n\n  const includeGlobs = config.include || defaultIncludeGlobs\n  const excludeGlobs = config.exclude\n    ? [...config.exclude, ...defaultExcludeGlobs]\n    : defaultExcludeGlobs\n\n  if (config.parser === 'custom' && (!includeGlobs || includeGlobs.length === 0)) {\n    exitWithError('Include globs must specified in config file for custom parsers')\n  }\n\n  if (!includeGlobs) {\n    exitWithError('No include globs specified in config file')\n  }\n\n  const files = globSync(mapToAbsolutePaths(includeGlobs, absPath), {\n    nodir: true,\n    ignore: mapToAbsolutePaths(excludeGlobs, absPath),\n    // Otherwise this is true on *nix and false on Windows\n    absolute: true,\n  })\n\n  if (files.length > 10000) {\n    logger.warn(\n      `Matching number of files was excessively large (${files.length}) - consider using more specific include/exclude globs in your config file.`,\n    )\n  }\n\n  return {\n    absPath,\n    remoteUrl,\n    config,\n    files,\n  }\n}\n\n/**\n * Validates the language field in the config.\n * Throws an error if the language is invalid.\n *\n * @param language The language string to validate\n */\nfunction validateLanguage(language: SyntaxHighlightLanguage | undefined): void {\n  if (!language) return\n\n  const validLanguages = Object.values(SyntaxHighlightLanguage)\n  if (!validLanguages.includes(language)) {\n    throw new Error(\n      `Invalid language \"${language}\" in figma.config.json. ` +\n        `Valid values are: ${validLanguages.join(', ')}`,\n    )\n  }\n}\n\n/**\n * Gets information about a project from a directory.\n *\n * @param dir Directory containing the project\n * @param configPath Optional path to Code Connect config file\n * @returns Object containing information about the project\n */\nexport async function getProjectInfo(dir: string, configPath: string): Promise<ProjectInfo> {\n  const { config } = await parseOrDetermineConfig(dir, configPath)\n\n  // Validate language field if present\n  validateLanguage(config.language)\n\n  return getProjectInfoFromConfig(dir, config)\n}\n\nexport function getReactProjectInfo(\n  projectInfo: ProjectInfo<CodeConnectReactConfig>,\n): ReactProjectInfo {\n  const tsProgram = getTsProgram(projectInfo)\n\n  return {\n    ...projectInfo,\n    tsProgram,\n  }\n}\n\nexport function getTsProgram(projectInfo: ProjectInfo<CodeConnectConfig>): ts.Program {\n  const compilerOptions: ts.CompilerOptions = {\n    // This ensures the compiler can resolve imports such as \"ui/button\" when a\n    // baseUrl is configured in the tsconfig of the project. We probably want a more\n    // sophisticated way to parse the users tsconfig and pass it to the compiler eventually.\n    baseUrl: projectInfo.absPath,\n    // TODO: not sure why Node10 is needed her, but otherwise module resolution for\n    // pnpm workspaces won't work\n    moduleResolution: ts.ModuleResolutionKind.Node10,\n    paths: 'paths' in projectInfo.config ? (projectInfo.config.paths ?? {}) : {},\n    allowJs: true,\n  }\n\n  return ts.createProgram(projectInfo.files, compilerOptions)\n}\n\n/**\n * Change an imported path for a component like `./button` to e.g `@ui/button`, based on the config file.\n * Note that `filePath` here is the path to the source file on disk, not the module specifier.\n *\n * @param filePath\n * @param config\n * @returns\n */\nexport function mapImportPath(filePath: string, config: CodeConnectReactConfig): string | null {\n  // Takes the reversed path and pattern parts and check if they match\n  function isMatch(patternParts: string[], pathParts: string[]) {\n    if (patternParts[0] === '*') {\n      // if the path is just a wildcard and nothing else, match any import\n      if (patternParts.length === 1) {\n        return true\n      }\n\n      // if the _next_ part in the pattern does not exist in the path, it's not\n      // a match.\n      const index = pathParts.indexOf(patternParts[1])\n      if (index === -1) {\n        return false\n      }\n\n      // Skip to the matching part in the path and match the rest of\n      // the pattern. E.g if the pattern is `*/ui/src` (reversed) and the path is\n      // `button.tsx/components/ui/src`, we skip to `ui` and match the rest of the\n      // pattern.\n      patternParts = patternParts.slice(1)\n      pathParts = pathParts.slice(index)\n    }\n\n    for (let i = 0; i < patternParts.length; i++) {\n      if (patternParts[i] !== pathParts[i]) {\n        return false\n      }\n    }\n    return true\n  }\n\n  for (const [key, value] of Object.entries(config.importPaths || {})) {\n    // Do a partial match from the end of the path\n    const patternParts = key.split('/').reverse()\n    const pathParts = filePath.split('/').reverse()\n    if (pathParts.length < patternParts.length) {\n      continue\n    }\n\n    // If the mapped path ends with a wildcard we want to keep the filename in\n    // the final path\n    if (isMatch(patternParts, pathParts)) {\n      if (value.endsWith('*')) {\n        const filename = pathParts[0].split('.')[0]\n        return `${value.slice(0, -1)}${filename}`\n      }\n      return value\n    }\n  }\n\n  return null\n}\n\n/**\n * Transform an import specifier (the path in the import statement) using importPaths config.\n * This works directly on the module specifier from the source code, preserving the user's intent.\n *\n * E.g., '@/AlertTitle' with config { \"@/*\": \"@acme/package/*\" } → '@acme/package/AlertTitle'\n *\n * @param specifier The original import specifier from the source file (e.g., '@/AlertTitle', './Button')\n * @param config The Code Connect config containing importPaths\n * @returns The transformed import path, or null if no mapping matched\n */\nexport function mapImportSpecifier(\n  specifier: string,\n  config: CodeConnectReactConfig,\n): string | null {\n  for (const [pattern, replacement] of Object.entries(config.importPaths || {})) {\n    // Convert glob pattern to regex: @/* → ^@/(.*)$\n    // First escape special regex chars, then convert * to capture group\n    const regexPattern = pattern\n      .replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&') // Escape special chars except *\n      .replace(/\\*/g, '(.*)') // Convert * to capture group\n    const regex = new RegExp(`^${regexPattern}$`)\n    const match = specifier.match(regex)\n\n    if (match) {\n      // Replace * in replacement with captured group\n      let result = replacement\n      if (match[1] !== undefined) {\n        result = replacement.replace('*', match[1])\n      }\n      return result\n    }\n  }\n  return null\n}\n"]}