{"version":3,"file":"embeddings.js","sourceRoot":"","sources":["../../../src/connect/wizard/embeddings.ts"],"names":[],"mappings":";;AAYA,0CA0BC;AAtCD,8CAA4C;AAC5C,sDAAyD;AACzD,wCAAyC;AAUlC,KAAK,UAAU,eAAe,CAAC,EACpC,oBAAoB,EACpB,WAAW,EACX,QAAQ,EACR,cAAc,GAMf;IACC,MAAM,MAAM,GAAG,IAAA,0BAAS,EAAC,QAAQ,EAAE,cAAc,CAAC,CAAA;IAClD,MAAM,OAAO,GAAG,IAAA,sBAAY,EAAC,QAAQ,CAAC,CAAA;IAEtC,MAAM,MAAM,GAAG,MAAM,eAAO,CAAC,IAAI,CAC/B,MAAM,GAAG,+BAA+B,EACxC,oBAAoB,EACpB;QACE,OAAO,EAAE,IAAA,2BAAU,EAAC,WAAW,CAAC;QAChC,KAAK,EAAE;YACL,QAAQ,EAAE,OAAO;SAClB;KACF,CACF,CAAA;IAED,OAAO,MAAM,CAAC,IAAI,CAAA;AACpB,CAAC","sourcesContent":["import { request } from '../../common/fetch'\nimport { getApiUrl, getHeaders } from '../figma_rest_api'\nimport { parseFileKey } from '../helpers'\n\nexport type EmbeddingsResponse = {\n  status: number\n  error: boolean\n  meta: {\n    embeddings: number[][]\n  }\n}\n\nexport async function fetchEmbeddings({\n  uniqueMatchableNames,\n  accessToken,\n  figmaUrl,\n  apiUrlOverride,\n}: {\n  uniqueMatchableNames: string[]\n  accessToken: string\n  figmaUrl: string\n  apiUrlOverride?: string\n}) {\n  const apiUrl = getApiUrl(figmaUrl, apiUrlOverride)\n  const fileKey = parseFileKey(figmaUrl)\n\n  const result = await request.post<EmbeddingsResponse>(\n    apiUrl + '/code_connect/name_embeddings',\n    uniqueMatchableNames,\n    {\n      headers: getHeaders(accessToken),\n      query: {\n        file_key: fileKey,\n      },\n    },\n  )\n\n  return result.data\n}\n"]}